// Video files configuration - Google Drive integration
// Computer videos are hosted on Google Drive folder: 1qHsU3Jgi1mkfIO6Frsa6oDpZbtgBvV7B
export const videoLinks = {
  en: {
    computer: {
      lesson1: "https://drive.google.com/file/d/12X2tMJsZsKfsBbHWEb4pA8UEIlOrAsBG/preview",
      lesson2: "https://drive.google.com/file/d/1_6ak-dnSv19WBxf3SHLHo9hI9SsoR7aR/preview", 
      lesson3: "https://drive.google.com/file/d/16hE8743tBnWxnoMwnjhFQwcb8QhQl2o8/preview",
      lesson4: "https://drive.google.com/file/d/160vOWmNaUyEfCh9UXB4Tqdo2GaU07uaG/preview",
      lesson5: "https://drive.google.com/file/d/177dx19YWIZxQ9LApmwZbkNLYXlbmiZiz/preview",
    },
    smartphone: {
      lesson1: "https://drive.google.com/file/d/1AxyYDUT4my4HltD1VwnNIBmOi551vgaa/preview",
      lesson2: "https://drive.google.com/file/d/1loYqiXMt5lDjOwWJ2jJ6LLYlaQK6KBJQ/preview",
      lesson3: "https://drive.google.com/file/d/18uDjdJmQ47tbq0ujl7ZKsWrS9J6FJtvb/preview",
      lesson4: "PLACEHOLDER",
      lesson5: "PLACEHOLDER",
    },
    internet: {
      lesson1: "https://drive.google.com/file/d/1U8fpdWy2l_2VMxhYcGKpYvXV_IZnF9qs/preview",
      lesson2: "https://drive.google.com/file/d/14PDunr4Gy2B9KqxImoI2uqUJC3-19wFG/preview",
      lesson3: "https://drive.google.com/file/d/1SL1CckJtXugKjUvGkEvsFdxYYGbuCrPG/preview",
      lesson4: "PLACEHOLDER",
      lesson5: "PLACEHOLDER",
    },
    apps: {
      lesson1: "https://drive.google.com/file/d/1fPgKkcrS3ZQ1S8ltG_Bsq7xTnXARaBH0/preview",
      lesson2: "https://drive.google.com/file/d/1HD1IkFOLZpAH7n8weVZGcS15A5wS5o0a/preview",
      lesson3: "https://drive.google.com/file/d/1lZIlk64amxMMGgsPCGuKrInek5VSQUhM/preview",
      lesson4: "https://drive.google.com/file/d/1jnQcveb7D-35gyyqs8yLXDKCVin9rjKu/preview",
      lesson5: "PLACEHOLDER",
    },
    appliances: {
      lesson1: "PLACEHOLDER",
      lesson2: "PLACEHOLDER",
      lesson3: "PLACEHOLDER",
      lesson4: "PLACEHOLDER",
      lesson5: "PLACEHOLDER",
    },
  },
  hi: {
    computer: {
      lesson1: "/videos/hi/computer/lesson1.mp4",
      lesson2: "/videos/hi/computer/lesson2.mp4",
      lesson3: "/videos/hi/computer/lesson3.mp4",
      lesson4: "/videos/hi/computer/lesson4.mp4",
      lesson5: "/videos/hi/computer/lesson5.mp4",
    },
    smartphone: {
      lesson1: "/videos/hi/smartphone/lesson1.mp4",
      lesson2: "/videos/hi/smartphone/lesson2.mp4",
      lesson3: "/videos/hi/smartphone/lesson3.mp4",
      lesson4: "/videos/hi/smartphone/lesson4.mp4",
      lesson5: "/videos/hi/smartphone/lesson5.mp4",
    },
    internet: {
      lesson1: "/videos/hi/internet/lesson1.mp4",
      lesson2: "/videos/hi/internet/lesson2.mp4",
      lesson3: "/videos/hi/internet/lesson3.mp4",
      lesson4: "/videos/hi/internet/lesson4.mp4",
      lesson5: "/videos/hi/internet/lesson5.mp4",
    },
    apps: {
      lesson1: "/videos/hi/apps/lesson1.mp4",
      lesson2: "/videos/hi/apps/lesson2.mp4",
      lesson3: "/videos/hi/apps/lesson3.mp4",
      lesson4: "/videos/hi/apps/lesson4.mp4",
      lesson5: "/videos/hi/apps/lesson5.mp4",
    },
    appliances: {
      lesson1: "/videos/hi/appliances/lesson1.mp4",
      lesson2: "/videos/hi/appliances/lesson2.mp4",
      lesson3: "/videos/hi/appliances/lesson3.mp4",
      lesson4: "/videos/hi/appliances/lesson4.mp4",
      lesson5: "/videos/hi/appliances/lesson5.mp4",
    },
  },
  te: {
    computer: {
      lesson1: "/videos/te/computer/lesson1.mp4",
      lesson2: "/videos/te/computer/lesson2.mp4",
      lesson3: "/videos/te/computer/lesson3.mp4",
      lesson4: "/videos/te/computer/lesson4.mp4",
      lesson5: "/videos/te/computer/lesson5.mp4",
    },
    smartphone: {
      lesson1: "/videos/te/smartphone/lesson1.mp4",
      lesson2: "/videos/te/smartphone/lesson2.mp4",
      lesson3: "/videos/te/smartphone/lesson3.mp4",
      lesson4: "/videos/te/smartphone/lesson4.mp4",
      lesson5: "/videos/te/smartphone/lesson5.mp4",
    },
    internet: {
      lesson1: "/videos/te/internet/lesson1.mp4",
      lesson2: "/videos/te/internet/lesson2.mp4",
      lesson3: "/videos/te/internet/lesson3.mp4",
      lesson4: "/videos/te/internet/lesson4.mp4",
      lesson5: "/videos/te/internet/lesson5.mp4",
    },
    apps: {
      lesson1: "/videos/te/apps/lesson1.mp4",
      lesson2: "/videos/te/apps/lesson2.mp4",
      lesson3: "/videos/te/apps/lesson3.mp4",
      lesson4: "/videos/te/apps/lesson4.mp4",
      lesson5: "/videos/te/apps/lesson5.mp4",
    },
    appliances: {
      lesson1: "/videos/te/appliances/lesson1.mp4",
      lesson2: "/videos/te/appliances/lesson2.mp4",
      lesson3: "/videos/te/appliances/lesson3.mp4",
      lesson4: "/videos/te/appliances/lesson4.mp4",
      lesson5: "/videos/te/appliances/lesson5.mp4",
    },
  },
};

// Google Drive folder configuration
const DRIVE_FOLDERS = {
  computer: "1qHsU3Jgi1mkfIO6Frsa6oDpZbtgBvV7B",
  apps: "1X_FWfrLsOQh49CmC21e6vw-sl0aqatQy",
  smartphone: "PLACEHOLDER",
  internet: "PLACEHOLDER",
  appliances: "PLACEHOLDER"
};

import { getCDNVideoUrl, getOptimizedVideoUrl } from './cdn';

// Helper function to get video URL
export const getVideoUrl = (language, category, lessonNumber) => {
  console.log('getVideoUrl called with:', { language, category, lessonNumber });
  
  try {
    const lessonKey = `lesson${lessonNumber}`;
    console.log('Looking for lessonKey:', lessonKey);
    
    const videoPath = videoLinks[language]?.[category]?.[lessonKey] || 
                     videoLinks.en?.[category]?.[lessonKey];
    
    console.log('Found videoPath:', videoPath);
    console.log('Available categories for', language, ':', Object.keys(videoLinks[language] || {}));
    console.log('Available lessons for', category, ':', Object.keys(videoLinks[language]?.[category] || {}));
    
    return videoPath || null;
  } catch (error) {
    console.error('Error getting video URL:', error);
    return null;
  }
};

export const loadVideoWithFallback = async (videoElement, urls) => {
  try {
    videoElement.src = urls.primary;
    await new Promise((resolve, reject) => {
      videoElement.onloadeddata = resolve;
      videoElement.onerror = reject;
    });
  } catch {
    videoElement.src = urls.fallback;
  }
};